(this["webpackJsonpuser-react-web-client"]=this["webpackJsonpuser-react-web-client"]||[]).push([[0],{10:function(e,a,t){e.exports=t(24)},24:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),l=t(9),s=t.n(l),c=t(4),i=t(1),m=function(e,a){switch(a.type){case"FetchDataSuccess":return Object(i.a)(Object(i.a)({},e),{},{users:a.payload.users});case"FetchDataFailure":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!0,type:"danger",message:"Could not load remote data: ".concat(a.payload.error)}});case"HandleViewUser":return Object(i.a)(Object(i.a)({},e),{},{onViewUser:!0,onAddUser:!1,onEditUser:!1,User:a.payload.user});case"HandleCloseViewUser":return Object(i.a)(Object(i.a)({},e),{},{onViewUser:!1,User:null});case"HandleOnAddUser":return Object(i.a)(Object(i.a)({},e),{},{onAddUser:!0,onEditUser:!1,alert:Object(i.a)(Object(i.a)({},e.alert),{},{show:!1})});case"HandleCancelCreate":return Object(i.a)(Object(i.a)({},e),{},{onAddUser:!1});case"BeforeCreateUser":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!0,type:"info",message:"Creating user. Please wait!"}});case"CreateUserSuccess":var t=e.users;return t.push(a.payload.user),Object(i.a)(Object(i.a)({},e),{},{users:t,onAddUser:!1,alert:{show:!0,type:"success",message:"User successfully created!"}});case"CreateUserFailure":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!0,type:"danger",message:"Could not create User: ".concat(a.payload.error)}});case"BeforeDeleteUser":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!0,type:"info",message:"Deleting User. Please wait!"}});case"DeleteUserSuccess":var r=e.users,n=r.findIndex((function(e){return e.id===a.payload.id}));return r.splice(n,1),Object(i.a)(Object(i.a)({},e),{},{onViewUser:!1,users:r,alert:{show:!0,type:"success",message:"User successfully deleted!"}});case"DeleteUserFailure":return Object(i.a)(Object(i.a)({},e),{},{onViewUser:!1,alert:{show:!0,type:"danger",message:"Could not delete User: ".concat(a.payload.error)}});case"BeforeUpdateUser":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!0,type:"info",message:"Updating User. Please wait!"}});case"HandleCancelUpdate":return Object(i.a)(Object(i.a)({},e),{},{onEditUser:!1});case"HandleEditUser":var l=e.users,s=l.findIndex((function(e){return e.id===a.payload.id})),c=l[s];return Object(i.a)(Object(i.a)({},e),{},{onEditUser:!0,user:c,onAddUser:!1,alert:Object(i.a)(Object(i.a)({},e.alert),{},{show:!1})});case"UpdateUserSuccess":var m=e.users,o=m.findIndex((function(e){return e.id===a.payload.user.id}));return m[o]=a.payload.user,Object(i.a)(Object(i.a)({},e),{},{onViewUser:!1,users:m,user:a.payload.user,onEditUser:!1,alert:{show:!0,type:"success",message:"User successfully updated!"}});case"UpdateUserFailure":return Object(i.a)(Object(i.a)({},e),{},{onViewUser:!1,alert:{show:!0,type:"danger",message:"Could not update User : ".concat(a.payload.error)}});case"HandleCloseAlert":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!1,message:"",type:""}});default:return e}},o=t(2),d=t.n(o),u=t(3),p=function(){var e=Object(u.a)(d.a.mark((function e(a,t){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"BeforeCreateUser"}),e.prev=1,e.next=4,fetch("/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:if((r=e.sent).ok){e.next=7;break}throw new Error(r.statusText);case 7:return e.next=9,r.json();case 9:n=e.sent,t({type:"CreateUserSuccess",payload:{user:n}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t({type:"CreateUserFailure",payload:{error:e.t0}});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(a,t){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(d.a.mark((function e(a,t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"BeforeDeleteUser"}),e.prev=1,e.next=4,fetch("/users/".concat(a),{method:"DELETE"});case 4:if((r=e.sent).ok){e.next=7;break}throw new Error(r.statusText);case 7:t({type:"DeleteUserSuccess",payload:{id:a}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t({type:"DeleteUserFailure",payload:{error:e.t0}});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(a,t){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(d.a.mark((function e(a,t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"BeforeUpdateUser"}),e.prev=1,e.next=4,fetch("/users/".concat(a.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:if((r=e.sent).ok){e.next=7;break}throw new Error(r.statusText);case 7:return e.next=9,r.json();case 9:t({type:"UpdateUserSuccess",payload:{user:a}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t({type:"UpdateUserFailure",payload:{error:e.t0}});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(a,t){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(d.a.mark((function e(a){var t,r,n,l=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:{},e.prev=1,e.next=4,fetch("/users?findOptions=".concat(encodeURI(JSON.stringify(t))));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error(r.statusText);case 7:return e.next=9,r.json();case 9:n=e.sent,a({type:"FetchDataSuccess",payload:{usersCount:n.count,users:n.users}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),a({type:"FetchDataFailure",payload:{error:e.t0}});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(a){return e.apply(this,arguments)}}(),h=t(5),b=function(e){var a=e.message,t=e.type,r=e.onClickHandler;return n.a.createElement(h.Notification,{color:t,onClick:r},a,n.a.createElement(h.Button,{remove:!0}))},f=function(e){var a=e.user,t=Object(r.useContext)(C);return n.a.createElement("tr",null,n.a.createElement("td",null,a.firstName),n.a.createElement("td",null,a.middleName),n.a.createElement("td",null,a.lastName),n.a.createElement("td",null,a.commonName),n.a.createElement("td",null,a.primaryEmailAddress),n.a.createElement("td",null,a.active),n.a.createElement("td",null,n.a.createElement("div",{className:"buttons are-small"},n.a.createElement("button",{className:"button is-link",onClick:function(){t.dispatch({type:"HandleViewUser",payload:{user:a}})}},"View Detail"),n.a.createElement("button",{className:"button is-warning",onClick:function(){t.dispatch({type:"HandleEditUser",payload:{id:a.id}})}},"Edit"),n.a.createElement("button",{className:"button is-danger",onClick:function(){window.confirm("This action cannot be reversed! Are you sure you want to delete?")&&t.handleDeleteUser(a.id,t.dispatch)}},"Delete"))))},y=function(){return n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"First Name"),n.a.createElement("th",null,"Middle Name"),n.a.createElement("th",null,"Last Name"),n.a.createElement("th",null,"Common Name"),n.a.createElement("th",null,"Gender"),n.a.createElement("th",null,"Contact Email"),n.a.createElement("th",null,"Active"),n.a.createElement("th",null,"Action")))},U=function(e){var a;return a=e.users.map((function(e){return n.a.createElement(f,{user:e})})),n.a.createElement("div",{className:"table is-striped is-narrow is-hoverable"},n.a.createElement("caption",null,n.a.createElement("h3",null,"Available users")),n.a.createElement(y,null),n.a.createElement("tbody",null,a))},w=function(e){var a={firstName:"",middleName:"",lastName:"",commonName:"",dateOfBirth:new Date,isActive:!0,primaryEmailAddress:"",isPrimaryEmailAddressVerified:!0,passwordSalt:"",passwordHash:"",isPasswordChangeRequired:!1,resetPasswordToken:"",resetPasswordExpiration:new Date,primaryEmailVerificationToken:"",otpEnabled:!0,otpSecret:"",profile:{homeAddress:"",nationality:"",stateOfOrigin:"",photoId:"",bulmaProperties:{primaryColor:"",primaryBackground:""}}},t=Object(r.useState)(Object(i.a)({},a)),l=Object(c.a)(t,2),s=l[0],m=l[1],o=function(e){var a=s,t=e.target;a[t.name]=t.value,m(Object(i.a)({},a))};return n.a.createElement("div",{className:"columns is-mobile"},n.a.createElement("div",{className:"column is-two-thirds"},n.a.createElement("div",{className:"box"},n.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.handleCreateUser(s,e.dispatch)}},n.a.createElement("legend",null,"Add User:"),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"First Name"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"text",placeholder:"Name input",name:"firstName",value:s.firstName,onChange:o,required:!0}))),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Middle Name"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"text",placeholder:"Middle Name input",name:"middleName",value:s.middleName,onChange:o,required:!0}))),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Last Name"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"text",placeholder:"Last name input",name:"lastName",value:s.lastName,onChange:o,required:!0}))),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Common Name"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"text",placeholder:"Common name input",name:"commonName",value:s.commonName,onChange:o,required:!0}))),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Gender"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"text",placeholder:"Gender",name:"gender",value:s.gender,onChange:o,required:!0}))),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Contact email"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"email",placeholder:"Contact email input",name:"primaryEmailAddress",value:s.primaryEmailAddress,onChange:o,required:!0})),n.a.createElement("p",{className:"help is-info"},"Enter a valid email here")),n.a.createElement("div",{className:"field is-grouped"},n.a.createElement("div",{className:"control"},n.a.createElement("button",{className:"button is-link"},"Submit")),n.a.createElement("div",{className:"control"},n.a.createElement("button",{className:"button is-link is-light",onClick:function(){e.dispatch({type:"HandleCancelCreate"})}},"Cancel")))))))},O=function(e){var a={id:e.user.id,firstName:e.user.firstName,middleName:e.user.middleName,lastName:e.user.lastName,gender:e.user.gender,primaryEmailAddress:e.user.primaryEmailAddress,active:e.user.active},t=Object(r.useState)(Object(i.a)({},a)),l=Object(c.a)(t,2),s=l[0],m=l[1],o=function(e){var a=s,t=e.target;a[t.name]=t.value,m(Object(i.a)({},a))};return n.a.createElement("div",{className:"columns is-mobile"},n.a.createElement("div",{className:"column is-two-thirds"},n.a.createElement("div",{className:"box"},n.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.handleUpdateUser(s,e.dispatch)}},n.a.createElement("legend",null,"Add User:"),n.a.createElement("input",{type:"hidden",name:"id",value:s.id,readOnly:!0}),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"First Name"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"text",placeholder:"Name input",name:"firstName",value:s.firstName,onChange:o,required:!0}))),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Middle Name"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"text",placeholder:"Middle Name input",name:"middleName",value:s.middleName,onChange:o,required:!0}))),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Last Name"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"text",placeholder:"Last name input",name:"lastName",value:s.lastName,onChange:o,required:!0}))),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Common Name"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"text",placeholder:"Common name input",name:"commonName",value:s.commonName,onChange:o,required:!0}))),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Gender"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"text",placeholder:"Gender",name:"gender",value:s.gender,onChange:o,required:!0}))),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Contact email"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"email",placeholder:"Contact email input",name:"primaryEmailAddress",value:s.primaryEmailAddress,onChange:o,required:!0})),n.a.createElement("p",{className:"help is-info"},"Enter a valid email here")),n.a.createElement("div",{className:"field is-grouped"},n.a.createElement("div",{className:"control"},n.a.createElement("button",{className:"button is-link"},"Submit")),n.a.createElement("div",{className:"control"},n.a.createElement("button",{className:"button is-link is-light",onClick:function(){e.dispatch({type:"HandleCancelUpdate"})}},"Cancel")))))))},g=function(e){var a=e.user,t=Object(r.useContext)(C);return n.a.createElement("div",{className:"modal is-active"},n.a.createElement("div",{className:"modal-background"}),n.a.createElement("div",{className:"modal-card"},n.a.createElement("header",{className:"modal-card-head"},n.a.createElement("p",{className:"modal-card-title"},"Details of ".concat(a.firstName)),n.a.createElement("button",{className:"delete","aria-label":"close",onClick:function(){t.dispatch({type:"HandleCloseViewUser"})}})),n.a.createElement("section",{className:"modal-card-body"},n.a.createElement("div",{className:"columns"},n.a.createElement("div",{className:"column is-two-fifths"},"First Name:"),n.a.createElement("div",{className:"column"},a.firstName)),n.a.createElement("div",{className:"columns"},n.a.createElement("div",{className:"column is-two-fifths"},"Contact Last Name:"),n.a.createElement("div",{className:"column"},a.lastName)),n.a.createElement("div",{className:"columns"},n.a.createElement("div",{className:"column is-two-fifths"},"Gender:"),n.a.createElement("div",{className:"column"},a.gender)),n.a.createElement("div",{className:"columns"},n.a.createElement("div",{className:"column is-two-fifths"},"Email:"),n.a.createElement("div",{className:"column"},a.primaryEmailAddress)),n.a.createElement("div",{className:"columns"},n.a.createElement("div",{className:"column is-two-fifths"},"Active:"),n.a.createElement("div",{className:"column"},a.isActive?"Yes":"No"))),n.a.createElement("footer",{className:"modal-card-foot"},n.a.createElement("div",{className:"buttons are-small"},n.a.createElement("button",{className:"button is-warning",onClick:function(){t.dispatch({type:"HandleEditUser",payload:{id:a.id}})}},"Edit"),n.a.createElement("button",{className:"button is-danger",onClick:function(){window.confirm("This action cannot be reversed! Are you sure you want to delete?")&&t.handleDeleteUser(a.id,t.dispatch)}},"Delete")))))},C=n.a.createContext(null),j=function(e){e.jwtToken;var a=Object(r.useReducer)(m,{users:[],user:null,onAddUser:!1,onViewUser:!1,onEditUser:!1,userToEdit:null,alert:{show:!1,message:"",type:""}}),t=Object(c.a)(a,2),l=t[0],s=t[1],i={};Object(r.useEffect)((function(){v(s,i)}),[]);var o=n.a.createElement(b,{type:l.alert.type,message:l.alert.message,onClickHandler:function(){s({type:"HandleCloseAlert"})}});return l.onEditUser&&null!==l.user?n.a.createElement("div",{className:"container "},n.a.createElement("div",{className:"content is-medium"},n.a.createElement("p",null,n.a.createElement(O,{user:l.user,handleUpdateUser:N,dispatch:s})),n.a.createElement("p",null,l.alert.show&&o),n.a.createElement("p",null,n.a.createElement(C.Provider,{value:{dispatch:s,handleDeleteUser:E}},n.a.createElement(U,{users:l.users}))))):l.onAddUser?n.a.createElement("div",{className:"container "},n.a.createElement("div",{className:"content is-medium"},n.a.createElement("p",null,n.a.createElement(w,{handleCreateUser:p,dispatch:s})),n.a.createElement("p",null,l.alert.show&&o),n.a.createElement("p",null,n.a.createElement(C.Provider,{value:{dispatch:s,handleDeleteUser:E}},n.a.createElement(U,{users:l.users}))))):l.onViewUser&&null!=l.user?n.a.createElement("div",{className:"container "},n.a.createElement("div",{className:"content is-medium"},n.a.createElement("p",null,n.a.createElement(C.Provider,{value:{dispatch:s,handleDeleteUser:E}},n.a.createElement(g,{user:l.user}))))):n.a.createElement("div",{className:"container "},n.a.createElement("div",{className:"content is-medium"},n.a.createElement("p",null,n.a.createElement("button",{className:"button is-outline",onClick:function(){s({type:"HandleOnAddUser"})}},"+ Add User")),n.a.createElement("p",null,l.alert.show&&o),n.a.createElement("p",null,n.a.createElement(C.Provider,{value:{dispatch:s,handleDeleteUser:E}},n.a.createElement(U,{users:l.users})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var x=document.getElementById("initial-props").getAttribute("data-json"),k=JSON.parse(x||"");s.a.hydrate(n.a.createElement(j,k),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[10,1,2]]]);
//# sourceMappingURL=main.65a42817.chunk.js.map